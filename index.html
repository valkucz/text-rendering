<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Text rendering</title>
</head>

<body>
  <script type="module" src="/src/main.ts"></script>
  <nav class="navbar is-visible is-fixed-top" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
      <div class="dropdown is-active">
        <div class="dropdown-trigger">
          <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" id="burger-btn">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
          </a>
        </div>
        <div class="dropdown-menu is-hidden-desktop is-mobile" id="dropdown-menu" role="menu">
          <div class="dropdown-content secondary-style" id="mobile-menu-content" style="display: none;">
            <a href="#section-2" class="dropdown-item">Demo</a>
            <a href="#section-3" class="dropdown-item">About</a>
            <a id="mobile-mode" class="dropdown-item">Dark mode</a>
          </div>
        </div>
      </div>
    </div>

    <div class="navbar-menu">
      <div class="navbar-start">
        <div class="tabs">
          <ul>
            <li><a href="#section-2">Demo</a></li>
            <li><a href="#section-3">About</a></li>
          </ul>
        </div>
      </div>

      <div class="navbar-end">
        <div class="buttons">
          <a class="button">
            <span class="icon"><ion-icon name="logo-github" size="large">

              </ion-icon></span>
          </a>
          <a class="button" id="mode-btn">
            <span class="icon"><ion-icon name="moon-outline" size="large">
              </ion-icon></span>
          </a>
        </div>
      </div>
    </div>
  </nav>
  <div style="position: absolute">

    <section class="section spacer layer1" id="section-2">
      <h1 class="title section-title">Demo</h1>
      <div class="demo">
        <div class="columns">
          <div class="upper-controller secondary-style column">
            <div class="columns is-mobile">
              <div class="column is-half is-mobile">
                <nav class="level is-mobile">
                  <div class="level-left">
                    <div class="level-item">
                      <div class="menu-control">
                        <div class="control-head is-mobile">
                          <p class="menu-label">Text</p>
                        </div>
                        <div>
                          <input id="text-input" class="input is-medium secondary-style" type="text"
                            placeholder="Text input">
                        </div>
                      </div>
                    </div>
                    <div class="level-item is-flex">
                      <div class="menu-control">
                        <div class="control-head">
                          <p class="menu-label">Font</p>
                        </div>
                        <div class="control is-align-self-center select is-medium secondary-style">
                          <select id="text-font" class="secondary-style">
                            <option value="Monofett.ttf" class="secondary-style">Monofett</option>
                            <option value="SpaceMono.ttf" class="secondary-style">Space Mono</option>
                            <option value="Blogger_Sans.otf" class="secondary-style">Blogger Sans</option>
                            <option value="MontserratAlternates-Medium.otf" class="secondary-style">MontserratAlternates
                              Medium</option>
                            <option value="HomemadeApple-Regular.ttf" class="secondary-style">Homemade Apple</option>
                            <option value="RubikIso-Regular.ttf" class="secondary-style">RubikIso</option>
                            <option value="Volkhov-Regular.ttf" class="secondary-style">Volkhov</option>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div class="level-item is-flex">
                      <div class="menu-control">
                        <div class="control-head">
                          <p class="menu-label">Color</p>
                        </div>
                        <div class="control">
                          <input type="color" id="text-color" class="input is-small input-color" value="#c9cdd7">
                          <input type="color" id="bgcolor" class="input is-small input-color" value="#f1e8eb">
                        </div>
                      </div>
                    </div>
                    <div class="level-item is-flex">
                      <div class="menu-control">
                        <div class="control-head">
                          <p class="menu-label">Spacing</p>
                        </div>
                        <div class="control is-align-self-center">
                          <input type="range" min="1" max="16" value="8" class="slider" id="text-spacing">
                        </div>
                      </div>
                    </div>
                    <div class="level-item is-flex">
                      <div class="menu-control">
                        <div class="control-head">
                          <p class="menu-label">Width</p>
                        </div>
                        <div class="control is-align-self-center">
                          <input type="range" min="1" max="16" value="8" class="slider" id="text-width">
                        </div>
                      </div>
                    </div>
                    <div class="level-item is-flex">
                      <div class="menu-control">
                        <div class="control-head">
                          <p class="menu-label">Size</p>
                        </div>
                        <div class="control is-align-self-center">
                          <input type="range" min="1" max="16" value="8" class="slider" id="text-size">
                        </div>
                      </div>
                    </div>
                    <div class="level-item is-flex">
                      <div class="menu-control">
                        <div>
                          <p class="menu-label">Filling algorithm</p>
                        </div>
                        <div class="control">
                          <label class="radio">
                            <input type="radio" name="radio-option" value="true" id="radio-is-winding" checked>
                            Winding Number

                            <label class="radio">
                              <input type="radio" name="radio-option" value="false" id="radio-is-sdf">
                              Signed distance
                            </label>
                        </div>
                      </div>
                    </div>
                  </div>
                </nav>
              </div>
            </div>
          </div>
        </div>
        <div class="columns demo-child is-mobile">
          <canvas class="canvas" id="canvas">
          </canvas>
          <div class="controller-menu secondary-style" id="controller-menu">
            <div class="content-menu" id="content-menu">
              <aside class="menu">
                <p class="menu-label">
                  Scene
                </p>
                <ul class="menu-list">
                  <li>Position</li>
                  <li>
                    <ul>
                      <li>
                        <p>x</p>
                        <input type="range" min="1" max="500" value="250" class="slider" id="glyph-move-x">
                      </li>
                      <li>
                        <p>y</p>
                        <input type="range" min="1" max="500" value="250" class="slider" id="glyph-move-y">
                      </li>
                      <li>
                        <p>z</p>
                        <input type="range" min="1" max="500" value="250" class="slider" id="glyph-move-z">
                      </li>
                    </ul>
                  </li>
                  <li>Rotation</li>
                  <li>
                    <ul>
                      <li>
                        <p>x</p>
                        <input type="range" min="1" max="360" value="0" class="slider" id="glyph-rotate-x">
                      </li>
                      <li>
                        <p>y</p>
                        <input type="range" min="1" max="360" value="15" class="slider" id="glyph-rotate-y">
                      </li>
                      <li>
                        <p>z</p>
                        <input type="range" min="1" max="360" value="0" class="slider" id="glyph-rotate-z">
                      </li>
                    </ul>
                  </li>
                  <li>Scale</li>
                  <ul>
                    <li><input type="range" min="1" max="500" value="245" class="slider" id="glyph-scale"></li>
                  </ul>
                  <li><button id="glyph-reset">Reset</button></li>
                </ul>
              </aside>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="section spacer layer2" id="section-3">
      <div class="content">
        <h1 class="title section-title">About</h1>
        <p>
          WebGPU<sup><a>[1]</a></sup> is a brand-new API that aims to optimize web-based graphics rendering.
          It was introduced in 2021 and is currently in the development phase.
          As an experimental feature on Chrome Canary, it offers developers the opportunity
          to explore its capabilities, including its potential for improving the efficiency and speed of graphics
          rendering.</p>
        <p>
          This website was created with Vite<sup><a>[2]</a></sup> as a part of Bachelor's thesis on the topic <i>3D Text
            rendering in WebGPU</i>.
          Its purpose is to showcase graphics API built with WebGPU that enables rendering of fonts in a dynamic 3D
          space.
          As can be seen in the demo, the user is able to interact with the text in real-time. It includes moving,
          rotating and scaling the text, as well as changing its color and background color.
          Since the canvas is representing a 3D space, the user can also move the camera around the text.
        </p>
        <p>Graphics API is available as an open-source library [URL].</p>
        <h3>How to Use API</h3>
        <h4>Initialization</h4>
        <pre class="secondary-style">
        /* Canvas initialization */
        const canvas = document.getElementById("canvas") as HTMLCanvasElement;

        /* WebGPU initialization */
        const adapter: GPUAdapter = await navigator.gpu.requestAdapter() as GPUAdapter;
        const device: GPUDevice = await adapter.requestDevice() as GPUDevice;
        
        /* Font initialization */
        const fontParser = new FontParser(device, "fonts/Roboto-Regular.ttf")

        /* Text block to render */
        const textBlock = new TextBlock(device, "Hello World", fontParser)

        /* Renderer initialization */
        const renderer = new Renderer(device, canvas, textBlock, projectionMatrix, viewMatrix, color?);

        /* Rendering */
        const perFrameData = this.renderer.prepare();
        this.renderer.render(perFrameData);
    </pre>
        <!-- <h4>Options</h4>
    <pre class="secondary-style">
    /* Text block options */
    </pre> -->
      </div>
    </section>
  </div>
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
</body>

</html>